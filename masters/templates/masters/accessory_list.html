<!DOCTYPE html>
<html>
<head>
    <title>Accessory List</title>
</head>
<body>
    <h1>Accessory List</h1>
    {% if perms.masters.add_accessory %}
        <a href="{% url 'masters:accessory_create' %}">Add New Accessory</a>
    {% endif %}

    <form method="get" action="{% url 'masters:accessory_list' %}">
        <input type="text" name="q" placeholder="Search by name, code, supplier" value="{{ query }}">
        <select name="type">
            <option value="">All Types</option>
            {% for type in all_types %}
                <option value="{{ type }}" {% if type == selected_type %}selected{% endif %}>{{ type }}</option>
            {% endfor %}
        </select>
        <select name="supplier">
            <option value="">All Suppliers</option>
            {% for supplier in all_suppliers %}
                <option value="{{ supplier }}" {% if supplier == selected_supplier %}selected{% endif %}>{{ supplier }}</option>
            {% endfor %}
        </select>
        <button type="submit">Search & Filter</button>
    </form>

    <ul>
        {% for accessory in accessories %}
            <li>
                <a href="{% url 'masters:accessory_detail' accessory.pk %}">{{ accessory.name }}</a>
                ({% if perms.masters.change_accessory %}<a href="{% url 'masters:accessory_update' accessory.pk %}">Edit</a>{% endif %}
                {% if perms.masters.change_accessory and perms.masters.delete_accessory %} | {% endif %}
                {% if perms.masters.delete_accessory %}<a href="{% url 'masters:accessory_delete' accessory.pk %}">Delete</a>{% endif %})
            </li>
        {% empty %}
            <li>No accessories found.</li>
        {% endfor %}
    </ul>
</body>
</html>